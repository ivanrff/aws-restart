# Build Your DB Server and Interact With Your DB Using an App
This lab is designed to reinforce the concept of leveraging an AWS-managed database instance for solving relational database needs.

## Objectives
After completing this lab, you can:
* Launch an Amazon RDS DB instance with high availability.
* Configure the DB instance to permit connections from your web server.
* Open a web application and interact with your database.

## Scenario
You start with the following infrastructure:
![](architecture-lab1.png)

At the end of the lab, this is the infrastructure:
![](architecture-lab2.png)

## Task 1: Create a Security Group for the RDS DB Instance

* **Security group name**: `DB Security Group`
* **Description**: `Permit access from Web Security Group`
* **VPC**: `Lab VPC`
* **Inbound Rule**:
    * Type: `MySQL/Aurora (3306)`
    * Source: `Web Security Group`.

## Task 2: Create a DB Subnet Group

* Name: DB Subnet Group
* Description: DB Subnet Group
* VPC ID: Lab VPC
* Add subnets:
    * [X] first Availability zone
    * [X] second Availability zone
* Subnets:
    * [X] `Private Subnet 1`, `10.0.1.0/24`
    * [X] `Private Subnet 2`, `10.0.3.0/24`

## Task 3: Create an Amazon RDS DB Instance

In this task, you will configure and launch a Multi-AZ Amazon RDS for MySQL database instance.

Amazon RDS Multi-AZ deployments provide enhanced availability and durability for Database (DB) instances, making them a natural fit for production database workloads. When you provision a Multi-AZ DB instance, Amazon RDS automatically creates a primary DB instance and synchronously replicates the data to a standby instance in a different Availability Zone (AZ).

Create database:
* `Full configuration`
* **Engine type**: `MySQL`
* **Engine version**: ~~latest~~ (There were errors using some versions here, try 8.0.44)
* **Templates**: `Dev/Test`
* **Availability and durability**: `Multi-AZ DB instance deployment (2 instsances)`
* **DB instance identifier**: `lab-db`
* **Master username**: `main`
* **Master password**: `lab-password`
* **Confirm password**: `lab-password`
* **DB instance class**: `Burstable classes (includes t classes)`
* **Instance type**: `db.t3.medium`
* **Storage type**: `General purpose SSD (gp3)`
* **Virtual Private Cloud (VPC)**: `Lab VPC`
* **VPC Security Group**: `DB Security Group`
* Uncheck **[ ] Enable Enhanced monitoring**
* **Initial database name**: `lab`
* Uncheck **[ ] Enable automated backups** (not recommended, but will make the DB launch faster)

After the DB is created, save the **DB Endpoint** and access the **Web Server Public IPv4**.

Click **RDS** at the top of the page to connect to the DB through the Web Server:
* **Endpoint:** `<DB Endpoint>`
* **Database:** `lab`
* **Username:** `main`
* **Password:** `lab-password`

If successful, the page shows an Address Book.

# Lab complete!